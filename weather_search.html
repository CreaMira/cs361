<!DOCTYPE html>
<!--
    Author: Nuocheng Shen
    Couse:CS361
-->
<html>
  <head>
      <title>Weather Searcher</title>
       <meta charset="UTF-8">
  </head>

  <body>
      <h1>Weather Searcher</h1>
      <form>
     
        <input type="text" placeholder="Search by zip code..." name="zipCode" id="zipCode">        
        <input type="submit" id="search" value = "Search">

    </form>

    <!--repsonse data-->
    <br>
    <span>City: </span><span id="city"></span>
    <br>
    <span>Weather: </span><span id="weather"></span>
    <br>
    <span>Temperature: </span><span id="temp"></span>
    <br>
    <span>Feels like Temperature: </span><span id="temp_fl"></span>
    <br>
    <span>Wind Speed: </span><span id="wind_speed"></span>
    <br>
    <span>Wind Degree: </span><span id="wind_degree"></span>

  </body>

  <script>
      var APIKey = "80ffaa5e9f1fdced49462be5dc381abc";
      document.addEventListener('DOMContentLoaded', search_zip);
      
      function search_zip(){
        document.getElementById('search').addEventListener('click', function(event){
         var req = new XMLHttpRequest();
         var call = {zipCode:null };
         call.zipCode = document.getElementById('zipCode').value;
          
        if ( call.zipCode != "" ){
            req.open("GET", "http://api.openweathermap.org/data/2.5/weather?zip="+ call.zipCode +"&appid=" + APIKey , false);
        }      
          
         req.send(null);
         console.log(JSON.parse(req.responseText));
         
         var response = JSON.parse(req.responseText);
         document.getElementById('city').textContent = response.name;
         document.getElementById('weather').textContent = response.weather[0].description;
         document.getElementById('temp').textContent = response.main.temp; //Kelvin
         document.getElementById('temp_fl').textContent = response.main.feels_like; //Kelvin
         document.getElementById('wind_speed').textContent = response.wind.speed; //meter/sec
         document.getElementById('wind_degree').textContent = response.wind.deg; //meter/sec
          
        event.preventDefault();
        })
    }
  </script>
</html>
